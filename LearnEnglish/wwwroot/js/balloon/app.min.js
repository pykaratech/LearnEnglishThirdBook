
var context, stage, domainName = window.location.hostname, type = getParameterByName("type"), allChaptersLink = "/", currentChapterLink = "/" + type; function makeResponsive() { var e = $(window).width() / 1920, t = $(window).height() / 979, a = e > t ? e : t; $(".controls").css("-moz-transform", "scale(" + a + ")"), $(".controls").css("-ms-transform", "scale(" + a + ")"), $(".controls").css("-o-transform", "scale(" + a + ")"), $(".controls").css("-webkit-transform", "scale(" + a + ")"), $(".controls").css("transform", "scale(" + a + ")") } $(".valijKapitel a")[0].setAttribute("href", allChaptersLink), $(".valijSida a")[0].setAttribute("href", currentChapterLink), window.onresize = function () { makeResponsive() }, makeResponsive(), $(document).ready(function () { var e = document.querySelector("canvas"); context = e.getContext("2d"), e.style.width = "100%", e.style.height = "100%", e.width = e.offsetWidth, e.height = e.offsetHeight, $(".overlay").show(), initCanvas(); var t = navigator.userAgent.indexOf(" Edge/") >= 0 || navigator.userAgent.indexOf(" edge/") >= 0, a = !!document.documentMode; document.documentMode, /iPad|iPhone|iPod/.test(navigator.platform) || "MacIntel" === navigator.platform && navigator.maxTouchPoints; a && $("html").addClass("ie"), t && $("html").addClass("ieedge") }); var hiddenObj_type = "Pictures", burstCount = -1, speedOffset = 400, ballonFadeOut_Timeout = 500 + speedOffset, burst_Timeout = ballonFadeOut_Timeout + 500 + speedOffset, hiddenObj_Timeout = burst_Timeout + 500 + speedOffset, Ease_Timeout = 500 + speedOffset, totalObjInvisible_Timeout = 2 * Ease_Timeout + hiddenObj_Timeout + speedOffset, totalObjInvisible_Wait = 500 + speedOffset, soundID = "Balloon_Burst"; $(".ballonOption label").click(function () { hiddenObj_type = this.innerText }), $("#points").change(function () { 0 == $("#points").val() ? speedOffset = 850 : 1 == $("#points").val() ? speedOffset = 400 : 2 == $("#points").val() && (speedOffset = 100), totalObjInvisible_Timeout = 2 * (Ease_Timeout = 500 + speedOffset) + (hiddenObj_Timeout = (burst_Timeout = (ballonFadeOut_Timeout = 500 + speedOffset) + 500 + speedOffset) + 500 + speedOffset) + speedOffset, totalObjInvisible_Wait = 500 + speedOffset }); var currChapter = getParameterByName("type"), hiddenObjs = []; function getParameterByName(e) { var t = RegExp("[?&]" + e + "=([^&]*)").exec(window.location.search); return t && decodeURIComponent(t[1].replace(/\+/g, " ")) } function shuffle(e) { for (var t, a, s = e.length; 0 !== s;)a = Math.floor(Math.random() * s), t = e[s -= 1], e[s] = e[a], e[a] = t; return e } hiddenObjs = shuffle(hiddenObjs = "opposites" == currChapter ? ["tall", "short", "big", "small", "clean", "dirty", "young", "old", "wet", "dry", "good", "bad"] : "wildanimals" == currChapter ? ["lion", "owl", "monkey", "crocodile", "squirrel", "deer", "wolf", "giraffe", "hippo", "fox", "bear", "elephant"] : "afterschool" == currChapter ? ["play the piano", "go horse riding", "play table tennis", "go to the cinema", "do gymnastics", "sing in a choir", "play basketball", "go to the library", "play computer games", "walk the dog", "bake a cake", "take acting class"] : "lunchtime" == currChapter ? ["chicken", "rice", "carrots", "hot dog", "apple pie", "meatballs", "potatoes", "sandwich", "pasta", "steak", "fish", "soup"] : "weather" == currChapter ? ["cold", "warm", "rainy", "thunder", "snowy", "cloudy", "sunny", "windy", "summer", "autumn", "winter", "spring"] : "partytime" == currChapter ? ["ice cream", "balloon", "candles", "lemonade", "cupcake", "surprise", "flag", "chocolate cake", "fancy dress", "gift", "sweets", "birthday card"] : "everyday" == currChapter ? ["wake up", "brush my teeth", "go to school", "have a break", "watch TV", "take a shower", "go to bed", "have breakfast", "do homework", "chat with friends", "eat dinner", "get dressed"] : "thehouse" == currChapter ? ["door", "garden", "hall", "stairs", "kitchen", "bedroom", "bathroom", "basement", "window", "wall", "floor", "living room"] : "goodtoknow" == currChapter ? ["eleven", "twelve", "thirteen", "fourteen", "fifteen", "sixteen", "seventeen", "eighteen", "nineteen", "twenty", "fifty", "one hundred"] : ["tall", "short", "big", "small", "clean", "dirty", "young", "old", "wet", "dry", "good", "bad"]); for (var queue = new createjs.LoadQueue(!0, null, !0), i = 1; i <= 12; i++){ domainName = "https://majemastoragelive.blob.core.windows.net/learn-english-test/"; /MSIE\s/.test(navigator.userAgent) && parseFloat(navigator.appVersion.split("MSIE")[1]) < 10 && (domainName = location.protocol + "//" + location.host + "/"), queue.loadManifest([{ src: domainName + "content/ballon/assets/images/ballon_" + i + ".png", id: "image_" + i }]) } for (i = 0; i < hiddenObjs.length; i++){ var img_ID = hiddenObjs[i].replace(/ /g, "-"); queue.loadManifest([{ src: "https://majemastoragelive.blob.core.windows.net/learn-english-test/content/ballon/" + currChapter + "/" + img_ID + ".png", id: img_ID }]) } queue.loadManifest([{ id: "img_dog_2", src: "https://majemastoragelive.blob.core.windows.net/learn-english-test/content/ballon/assets/images/dog_2.png" }]); var isResetBalloon = !1; function initCanvas() { queue.on("complete", function () { $(".overlay").hide() }), (stage = new createjs.Stage("canvas")).enableMouseOver(10), function () { var e = new createjs.Shape; e.graphics.beginFill("red").setStrokeStyle(2).beginStroke("red").drawRoundRect(400, 60, 1e3, 930, 1), e.alpha = 0, stage.addChild(e), stage.update(); var t = screen.width, a = screen.height, s = 1, n = 0, i = 0, r = window.matchMedia("(orientation: portrait)").matches, l = "landscape"; r && (l = "portrait"); var o = t + " X " + a, c = [{ screen_size: "1366 X 768", current_scale_size: .9, current_x_axis: 45, current_y_axis: 25, orientation: "" }, { screen_size: "1680 X 1050", current_scale_size: .9, current_x_axis: 45, current_y_axis: 25, orientation: "" }, { screen_size: "1600 X 900", current_scale_size: .9, current_x_axis: 45, current_y_axis: 25, orientation: "" }, { screen_size: "1536 X 864", current_scale_size: .6, current_x_axis: 15, current_y_axis: 160, orientation: "" }, { screen_size: "810 X 1080", current_scale_size: .4, current_x_axis: -70, current_y_axis: 150, orientation: "portrait" }, { screen_size: "810 X 1080", current_scale_size: .5, current_x_axis: 10, current_y_axis: 230, orientation: "landscape" }, { screen_size: "768 X 1024", current_scale_size: .4, current_x_axis: -70, current_y_axis: 120, orientation: "portrait" }, { screen_size: "768 X 1024", current_scale_size: .5, current_x_axis: 10, current_y_axis: 200, orientation: "landscape" }].filter(function (e) { return e.screen_size == o && "" == e.orientation || e.screen_size == o && e.orientation == l }); c.length > 0 && (s = c[0].current_scale_size, n = c[0].current_x_axis, i = c[0].current_y_axis), stage.scaleX = stage.scaleY = s, stage.x = n, stage.y = i, stage.update() }(), createjs.Sound.registerSound("https://majemastoragelive.blob.core.windows.net/learn-english-test/content/ballon/assets/Balloon_Burst.mp3", soundID); var e = 1 == isResetBalloon ? queue.getResult("image_1") : queue._loadItemsById.image_1._loader._tag, t = 1 == isResetBalloon ? queue.getResult("image_2") : queue._loadItemsById.image_2._loader._tag, a = 1 == isResetBalloon ? queue.getResult("image_3") : queue._loadItemsById.image_3._loader._tag, s = 1 == isResetBalloon ? queue.getResult("image_4") : queue._loadItemsById.image_4._loader._tag, n = 1 == isResetBalloon ? queue.getResult("image_5") : queue._loadItemsById.image_5._loader._tag, i = 1 == isResetBalloon ? queue.getResult("image_6") : queue._loadItemsById.image_6._loader._tag, r = 1 == isResetBalloon ? queue.getResult("image_7") : queue._loadItemsById.image_7._loader._tag, l = 1 == isResetBalloon ? queue.getResult("image_8") : queue._loadItemsById.image_8._loader._tag, o = 1 == isResetBalloon ? queue.getResult("image_9") : queue._loadItemsById.image_9._loader._tag, c = 1 == isResetBalloon ? queue.getResult("image_10") : queue._loadItemsById.image_10._loader._tag, d = 1 == isResetBalloon ? queue.getResult("image_11") : queue._loadItemsById.image_11._loader._tag, g = 1 == isResetBalloon ? queue.getResult("image_12") : queue._loadItemsById.image_12._loader._tag, h = new Image; h.crossOrigin = "Anonymous", h.src = "https://majemastoragelive.blob.core.windows.net/learn-english-test/content/ballon/assets/images/dog_1.png"; var u = new Image; u.src = "https://majemastoragelive.blob.core.windows.net/learn-english-test/content/ballon/assets/images/burst_effect.png"; var m = new Image, _ = { x: 860, y: 450 }, f = new createjs.Text("Kiwi", "bold 40px Arial"); f.textAlign = "center", f.setTransform(_.x, _.y), f.visible = !1; var p = { x: 750, y: 390 }, y = new createjs.Bitmap(m); y.setTransform(p.x, p.y), y.visible = !1; var b = { x: 600, y: 240 }, v = new createjs.Bitmap(u); v.setTransform(b.x, b.y), v.visible = !1; var w = [], x = new createjs.Bitmap(e); x.setTransform(710, 360), w.push(x); var B = new createjs.Bitmap(t); B.setTransform(873, 300), w.push(B); var j = new createjs.Bitmap(a); j.setTransform(875, 300), w.push(j); var T = new createjs.Bitmap(s); T.setTransform(670, 85), w.push(T); var k = new createjs.Bitmap(n); k.setTransform(435, 270), w.push(k); var O = new createjs.Bitmap(i); O.setTransform(860, 160), w.push(O); var I = new createjs.Bitmap(r); I.setTransform(875, 495), w.push(I); var C = new createjs.Bitmap(l); C.setTransform(490, 530), w.push(C); var R = new createjs.Bitmap(o); R.setTransform(520, 170), w.push(R); var q = new createjs.Bitmap(c); q.setTransform(760, 60), w.push(q); var X = new createjs.Bitmap(d); X.setTransform(875, 180), w.push(X); var Y = new createjs.Bitmap(g); Y.setTransform(875, 365), w.push(Y); var z = new createjs.Bitmap(h); function E(e) { try { var t = "Name: " + e + "; URL: " + window.location.href; appInsights.trackEvent(t) } catch (e) { } } z.setTransform(595, 680), z.name = "dog", x.on("click", function (e) { 1 != Q && (E("Balloon_1"), K = 0, G(x, 0, 0, 0)) }), B.on("click", function () { 1 != Q && (E("Balloon_2"), K = 1, G(B, 1, 200, 0)) }), j.on("click", function () { 1 != Q && (E("Balloon_3"), K = 2, G(j, 2, 270, 0)) }), T.on("click", function () { 1 != Q && (E("Balloon_4"), K = 3, G(T, 3, -70, -170)) }), k.on("click", function () { 1 != Q && (E("Balloon_5"), K = 4, G(k, 4, -200, 0)) }), O.on("click", function () { 1 != Q && (E("Balloon_6"), K = 5, G(O, 5, 120, -180)) }), I.on("click", function () { 1 != Q && (E("Balloon_7"), K = 6, G(I, 6, 400, 100)) }), C.on("click", function () { 1 != Q && (E("Balloon_8"), K = 7, G(C, 7, -260, 120)) }), R.on("click", function () { 1 != Q && (E("Balloon_9"), K = 8, G(R, 8, -230, -150)) }), q.on("click", function () { 1 != Q && (E("Balloon_10"), K = 9, G(q, 9, 0, -220)) }), X.on("click", function () { 1 != Q && (E("Balloon_11"), K = 10, G(X, 10, 250, -180)) }), Y.on("click", function () { 1 != Q && (E("Balloon_12"), K = 11, G(Y, 11, 420, 0)) }), z.on("click", function (e) { E("Balloon_Dog_Click"), stage.removeAllChildren(), stage.update(), createjs.Tween.removeAllTweens(), isResetBalloon = !0, initCanvas(), burstCount = -1 }), stage.addChild(Y, X, q, R, C, I, O, k, T, j, B, x, z, v, y, f); var M = 1, S = 1, P = 0, A = 0, N = 1.1, D = 1.5, F = screen.width, L = screen.height, W = /iPad|iPhone|iPod/.test(navigator.platform) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1; if (1366 == F && 768 == L) { P = 0, A = 0, S = .7, N -= 1 - (M = .7), D -= 1 - M; for (var U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (768 == F && 1024 == L && 1 == W && window.matchMedia("(orientation: landscape)").matches); else if (768 == F && 1024 == L && 1 == W && window.matchMedia("(orientation: portrait)").matches); else if (1024 == F && 768 == L) { P = -150, A = 50, S = .63, N -= 1 - (M = .63), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1680 == F && 1050 == L) { P = -100, A = 0, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1600 == F && 900 == L) { P = 0, A = 0, S = .85, N -= 1 - (M = .85), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 1024 == L) { P = -130, A = 170, S = .75, N -= 1 - (M = .75), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 960 == L) { P = -200, A = 65, S = .8, N -= 1 - (M = .8), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 800 == L) { P = 0, A = 0, S = .7, N -= 1 - (M = .7), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 720 == L) { P = 70, A = 25, S = .6, N -= 1 - (M = .6), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 768 == L) { P = 20, A = 20, S = .65, N -= 1 - (M = .65), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1600 == F && 1200 == L) { P = -200, A = 100, S = .9, N -= 1 - (M = .9), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1280 == F && 1050 == L) { P = -200, A = 150, S = .8, N -= 1 - (M = .8), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1440 == F && 900 == L) { P = 0, A = 10, S = .8, N -= 1 - (M = .8), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (2560 == F && 1440 == L) { P = -30, A = 40, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1920 == F && 1200 == L) { P = -80, A = 40, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (2880 == F && 1800 == L) { P = -50, A = 0, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (2560 == F && 1600 == L) { P = -50, A = 0, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } else if (1600 == F && 1024 == L) { P = -150, A = -40, S = 1, N -= 1 - (M = 1), D -= 1 - M; for (U = 0; U < stage.children.length; U++)stage.children[U].x = stage.children[U].x * M + P, stage.children[U].y = stage.children[U].y * S + A, stage.children[U].scaleX = stage.children[U].scaleY = S } stage.update(); var K, V = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]; function H() { var e, t, a, s; 0 == V[burstCount] ? (e = x, t = 0, a = 0, s = 0) : 1 == V[burstCount] ? (e = B, t = 1, a = 200, s = 0) : 2 == V[burstCount] ? (e = j, t = 2, a = 270, s = 0) : 3 == V[burstCount] ? (e = T, t = 3, a = -70, s = -170) : 4 == V[burstCount] ? (e = k, t = 4, a = -200, s = 0) : 5 == V[burstCount] ? (e = O, t = 5, a = 120, s = -180) : 6 == V[burstCount] ? (e = I, t = 6, a = 400, s = 100) : 7 == V[burstCount] ? (e = C, t = 7, a = -260, s = 120) : 8 == V[burstCount] ? (e = R, t = 8, a = -230, s = -150) : 9 == V[burstCount] ? (e = q, t = 9, a = 0, s = -220) : 10 == V[burstCount] ? (e = X, t = 10, a = 250, s = -180) : 11 == V[burstCount] && (e = Y, t = 11, a = 420, s = 0), burstCount <= 11 && (t != K ? G(e, t, a, s) : (burstCount++, H())) } V = shuffle(V); var Q = !1; function G(e, t, a, s) { Q = !0; var n = hiddenObjs[t]; n = n.trim(); for (var i = 0; i < w.length; i++)i != t && createjs.Tween.get(w[i]).to({ alpha: .3 }, ballonFadeOut_Timeout); createjs.Tween.get(z).to({ alpha: .3 }, ballonFadeOut_Timeout), createjs.Tween.get(v).wait(burst_Timeout).to({ x: (b.x + a + P) * M, y: (b.y + s + A) * S, scaleX: 1, scaleY: 1, alpha: 1, visible: !0 }, 0).call(function () { createjs.Sound.play(soundID), createjs.Tween.get(v).to({ scaleX: N, scaleY: N }, Ease_Timeout, createjs.Ease.elasticOut), "WORDS" == hiddenObj_type ? (f.visible = !0, f.scaleX = f.scaleY = 1, f.x = (_.x + a + P) * M, f.y = (_.y + s + A) * S, f.text = n, createjs.Tween.get(f).to({ scaleX: D, scaleY: D }, Ease_Timeout, createjs.Ease.elasticOut).wait(totalObjInvisible_Wait).call(function () { f.visible = !1, y.visible = !1, v.visible = !1; for (var e = 0; e < w.length; e++)e != t && (w[e].alpha = 1); z.alpha = 1, H() })) : (y.visible = !0, y.scaleX = y.scaleY = 1, y.x = (p.x + a + P) * M, y.y = (p.y + s + A) * M, n = n.replace(/ /g, "-"), y.image = queue.getResult(n), createjs.Tween.get(y).to({ scaleX: D, scaleY: D }, Ease_Timeout, createjs.Ease.elasticOut).wait(totalObjInvisible_Wait).call(function () { f.visible = !1, y.visible = !1, v.visible = !1; for (var e = 0; e < w.length; e++)e != t && (w[e].alpha = 1); z.alpha = 1, H() })), e.visible = !1; for (var i = 0, r = 0; r < w.length; r++)0 == w[r].visible && i++; 12 == i && (z.image = queue.getResult("img_dog_2")) }), burstCount++ } } function handleTick(e) { stage.update() } createjs.Ticker.addEventListener("tick", handleTick), createjs.Ticker.setInterval(25), createjs.Ticker.setFPS(40), $.each($("a"), function (e, t) { if (null != this) { var a = "Name: " + ("Anchor_" + this.text) + "; URL: " + window.location.href; appInsights.trackEvent(a) } });