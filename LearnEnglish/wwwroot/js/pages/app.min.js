
var isOpera = !!window.opera || navigator.userAgent.indexOf(" OPR/") >= 0, isFirefox = "undefined" != typeof InstallTrigger, isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0, isChrome = !!window.chrome && !isOpera, isEdge = navigator.userAgent.indexOf(" Edge/") >= 0 || navigator.userAgent.indexOf(" edge/") >= 0, isIExplorer = !!document.documentMode, clickHandler = "ontouchstart" in document.documentElement ? "touchstart" : "click"; clickHandler = "click", isIExplorer && ($("html").addClass("ie"), $("html").addClass("ie" + document.documentMode), IEVersion = document.documentMode), isEdge && $("html").addClass("ie ieedge"), isSafari && $("html").addClass("safari " + isiPhone()); var orientation = "landscape"; function detectIPadOrientation() { 0 == orientation ? orientation = "portrait" : 90 == orientation ? orientation = "landscape" : -90 == orientation ? orientation = "landscape" : 180 == orientation && (orientation = "portrait") } function setOrientation() { orientation = window.innerHeight > window.innerWidth ? "portrait" : "landscape" } function isiPhone() { return -1 != navigator.platform.indexOf("iPhone") ? "iphone" : -1 != navigator.platform.indexOf("iPod") ? "ipod" : -1 != navigator.platform.indexOf("iPad") ? "ipad" : void 0 } setOrientation(), window.onorientationchange = detectIPadOrientation, function (e) { "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports ? e(require("jquery")) : e(jQuery) }(function (e) { var t = /\+/g; function a(e) { return o.raw ? e : encodeURIComponent(e) } function i(e) { return a(o.json ? JSON.stringify(e) : String(e)) } function n(a, i) { var n = o.raw ? a : function (e) { 0 === e.indexOf('"') && (e = e.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")); try { return e = decodeURIComponent(e.replace(t, " ")), o.json ? JSON.parse(e) : e } catch (e) { } }(a); return e.isFunction(i) ? i(n) : n } var o = e.cookie = function (t, r, l) { if (void 0 !== r && !e.isFunction(r)) { if ("number" == typeof (l = e.extend({}, o.defaults, l)).expires) { var s = l.expires, d = l.expires = new Date; d.setTime(+d + 864e5 * s) } return document.cookie = [a(t), "=", i(r), l.expires ? "; expires=" + l.expires.toUTCString() : "", l.path ? "; path=" + l.path : "", l.domain ? "; domain=" + l.domain : "", l.secure ? "; secure" : ""].join("") } for (var u, c = t ? void 0 : {}, p = document.cookie ? document.cookie.split("; ") : [], m = 0, y = p.length; m < y; m++){ var g = p[m].split("="), h = (u = g.shift(), o.raw ? u : decodeURIComponent(u)), f = g.join("="); if (t && t === h) { c = n(f, r); break } t || void 0 === (f = n(f)) || (c[h] = f) } return c }; o.defaults = {}, e.removeCookie = function (t, a) { return void 0 !== e.cookie(t) && (e.cookie(t, "", e.extend({}, a, { expires: -1 })), !e.cookie(t)) } }); var appInsights = window.appInsights || function (e) { function t(e) { n[e] = function () { var t = arguments; n.queue.push(function () { n[e].apply(n, t) }) } } var a, i, n = { config: e }, o = document, r = window, l = "script", s = "AuthenticatedUserContext", d = "start", u = "stop", c = "Track", p = c + "Event", m = c + "Page", y = o.createElement(l); y.src = e.url || "https://az416426.vo.msecnd.net/scripts/a/ai.0.js", o.getElementsByTagName(l)[0].parentNode.appendChild(y); try { n.cookie = o.cookie } catch (e) { } for (n.queue = [], n.version = "1.0", a = ["Event", "Exception", "Metric", "PageView", "Trace", "Dependency"]; a.length;)t("track" + a.pop()); return t("set" + s), t("clear" + s), t(d + p), t(u + p), t(d + m), t(u + m), t("flush"), e.disableExceptionTracking || (t("_" + (a = "onerror")), i = r[a], r[a] = function (e, t, o, r, l) { var s = i && i(e, t, o, r, l); return !0 !== s && n["_" + a](e, t, o, r, l), s }), n }({ instrumentationKey: "524cd669-32d5-4f89-bcce-727a8209a0f4" }); window.appInsights = appInsights, appInsights.trackPageView(); var documentId = $("body").data("id"); function loadDocumentData() { $("input[type=text]").each(function (e, t) { var a = localStorage.getItem(licenseId + "document" + documentId + "-" + $(t).attr("id")); $(t).val(a) }), $("textarea").each(function (e, t) { var a = localStorage.getItem(licenseId + "document" + documentId + "-" + $(t).attr("id")); $(t).val(a) }) } function resetForm() { $("input[type=text]").each(function (e, t) { $(t).val("") }), $("textarea").each(function (e, t) { $(t).val("") }), $("input[type=checkbox").each(function (e, t) { $(t).prop("checked", !1) }) } function storeDocumentData() { $("input[type=text]").each(function (e, t) { localStorage.setItem(licenseId + "document" + documentId + "-" + $(t).attr("id"), $(t).val()) }), $("textarea").each(function (e, t) { localStorage.setItem(licenseId + "document" + documentId + "-" + $(t).attr("id"), $(t).val()) }), $("input[type=checkbox").each(function (e, t) { localStorage.setItem(licenseId + "document" + documentId + "-" + $(t).attr("id"), $(t).prop("checked")) }) } function $$(e) { return document.getElementById(e) } $(document).ready(function () { licenseId = $.cookie("licenseId") }), document.addEventListener("touchstart", function (e) { storeDocumentData() }, !1), document.addEventListener("click", function (e) { storeDocumentData() }, !1), $(function () { $(document).on("click", ".tick", function () { $(this).toggleClass("ticked") }), $("#resetBtn").on("click", function () { resetForm() }), documentId = $("body").data("id"), loadDocumentData(), $(".jump").keyup(function (e) { if ($(this).val().length == $(this).attr("maxlength")) { var t = parseInt($(this).attr("tabindex")); $("input[tabindex=" + ++t + "]").focus() } }) }), $(document).on("click", "#leftSide,#rightSide", function (e) { closeAllPopups() }); var currentAudioId, seektime, currentAudio = 0, jplayerAudioId = $("#jquery_jplayer_1 audio")[0] ? $("#jquery_jplayer_1 audio")[0].id : "", audioPlayerElement = $$(jplayerAudioId); function playAudio(e) { currentAudioId = e.attributes.name.value, $("#jquery_jplayer_1").jPlayer({ ready: function (e) { }, swfPath: "lib", volume: 100, supplied: "m4a, oga, mp3", wmode: "window", useStateClassSkin: !0, autoBlur: !1, smoothPlayBar: !0, keyEnabled: !0, remainingDuration: !0, toggleDuration: !0 }); new Number, new Number, e.id; $(".label").removeClass("active"), $(".label_img").removeClass("active"), $(".labelSong").removeClass("active"), $(".label_1").removeClass("active"), audioOverlay(e.getAttribute("data-popupid")), audioPlayerElement = $$($("#jquery_jplayer_1 audio")[0].id); var t = ""; isIExplorer && (t = "?id=" + Math.random()), $("#jquery_jplayer_1").jPlayer({ supplied: "m4a, oga, mp3" }).jPlayer("setMedia", { mp3: e.getAttribute("data-audio-src") + ".mp3" + t, oga: e.getAttribute("data-audio-src") + ".ogg" + t }), $("#jquery_jplayer_1").jPlayer("play", 0), 1 == (currentAudio = e.getAttribute("data-audio-highlight") ? 1 : 0) && set_active() } function set_active() { setTimeout(function () { "circle" != currentAudioId && "point" != currentAudioId && ("playSong" == currentAudioId ? $(".labelSong").addClass("active") : "label_1" == currentAudioId ? $(".label_1").addClass("active") : ($(".label").addClass("active"), $(".label_img").addClass("active"))) }, 200) } function set_interval() { setInterval(function () { highlightText(), highlightTextTime() }, 200) } function highlightTextTime() { null != audioPlayerElement && (sec = Math.floor(audioPlayerElement.currentTime), min = Math.floor(sec / 60), min = min >= 10 ? min : "0" + min, sec = Math.floor(sec % 60), sec = sec >= 10 ? sec : "0" + sec, $("#jplayer_total_time").html(min + ":" + sec), audioPlayerElement.duration == audioPlayerElement.currentTime && (audioPlayerElement.pause(), audioPlayerElement.currentTime = 0, $("#jplayer_total_time").html("00:00"))) } function highlightText() { var e = $$("playAudio_song1"); null == (e = e.getAttribute("data-audio-name")) && (e = "line_"); var t = ".active.label"; switch ("circle" == currentAudioId ? t = ".label_circle" : "point" == currentAudioId ? t = ".label_point" : "playSong" == currentAudioId ? t = ".labelSong" : "label_1" == currentAudioId && (t = ".label_1"), resetHighlights(), currentAudio) { case 0: break; case 1: $.each($(t), function (t, a) { var i = a.className; if (audioPlayerElement.duration == audioPlayerElement.currentTime && i.indexOf("songText") > -1) { l = (l = $$("txtbgColor")).getAttribute("data-seektimestart"), l = Number(l); for (var n = 1; n <= l; n++){ var o = $$(e + n); o.style.display = "inline", o.style.zIndex = 3; var r = o.getAttribute("data-top"); (/iPad|iPhone|iPod/.test(navigator.platform) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1) && 0 == orientation ? (r -= 24.5, r = Number(r), 1 == n ? (o.style.top = r + "%", o.style.color = "black", audioPlayerElement.pause(), audioPlayerElement.currentTime = 0) : 2 == n || 3 == n ? (r += 7 * (n - 1), o.style.top = r + "%", o.style.color = "#B2AFAD") : (o.style.zIndex = -1, o.style.color = "#B2AFAD")) : (r = Number(r), 1 == n ? (o.style.top = r + "%", o.style.color = "black", audioPlayerElement.pause(), audioPlayerElement.currentTime = 0) : 2 == n || 3 == n ? (r += 10 * (n - 1), o.style.top = r + "%", o.style.color = "#B2AFAD") : (o.style.zIndex = -1, o.style.color = "#B2AFAD")) } } if (audioPlayerElement.duration == audioPlayerElement.currentTime && (audioPlayerElement.pause(), audioPlayerElement.currentTime = 0), audioPlayerElement.currentTime > $(a).data("seektimestart") && audioPlayerElement.currentTime < $(a).data("seektimeend")) if (i.indexOf("songText") > -1) { $(".songText").addClass("animated"); var l, s = $(a).data("seektimestart"); if (l = (l = $$("txtbgColor")).getAttribute("data-seektimestart"), l = Number(l), seektime != s) { var d = a.id.split("_"), u = Number(d[1]); if (/iPad|iPhone|iPod/.test(navigator.platform) || "MacIntel" === navigator.platform && navigator.maxTouchPoints > 1) if (0 == orientation) for (var c = 1; c <= l; c++){ if ((m = $$(e + c)).style.display = "inline", u == c) { m.style.zIndex = 3, m.style.color = "black"; var p = m.getAttribute("data-top"); p = Number(p), p -= 24.5, m.style.top = p + "%" } else if (u + 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p -= 24.5, p += 7, m.style.top = p + "%" } else if (u + 2 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p -= 24.5, p += 14, m.style.top = p + "%" } else if (u - 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p -= 24.5, p -= 7, m.style.top = p + "%" } else m.style.zIndex = -1 } else for (c = 1; c <= l; c++){ if ((m = $$(e + c)).style.display = "inline", u == c) { m.style.zIndex = 3, m.style.color = "black"; p = m.getAttribute("data-top"); p = Number(p), m.style.top = p + "%" } else if (u + 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p += 10, m.style.top = p + "%" } else if (u + 2 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p += 20, m.style.top = p + "%" } else if (u - 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p -= 10, m.style.top = p + "%" } else m.style.zIndex = -1 } else for (c = 1; c <= l; c++){ var m; if ((m = $$(e + c)).style.display = "inline", u == c) { m.style.zIndex = 3, m.style.color = "black"; p = m.getAttribute("data-top"); p = Number(p), m.style.top = p + "%" } else if (u + 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p += 10, m.style.top = p + "%" } else if (u + 2 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p += 20, m.style.top = p + "%" } else if (u - 1 == c) { m.style.zIndex = 3, m.style.color = "#B2AFAD"; p = m.getAttribute("data-top"); p = Number(p), p -= 10, m.style.top = p + "%" } else m.style.zIndex = -1 } } } else resetHighlights(), "circle" == currentAudioId ? $(this).addClass("highlightCircle") : $(this).addClass("highlight") }) } } function resetHighlights() { $(".highlight").removeClass("highlight"), $(".highlightCircle").removeClass("highlightCircle") } function audioOverlay(e) { var t = $$($("#jquery_jplayer_1 audio")[0].id); t.style.display = "inline", t.style.zIndex = 4; var a = $$("audioPlayer"); a.style.display = "inline", a.style.zIndex = 4, $(".playButton").css("z-index", 2), $("." + e).css("z-index", 4), showImage(e); var i = getComputedStyleValue(e, "top"); parseInt(i.replace("px", "")); "popup2" == e && ($(".playButton").css("z-index", 2), $("." + e).css("z-index", 2)), $$("divOverlay").style.zIndex = 3 } function getComputedStyleValue(e, t) { var a = document.getElementById(e); return window.getComputedStyle(a).getPropertyValue(t) } function clsAudio() { var e = document.getElementById("txtbgColor"); if (null != e) { $$("txtbgColor").style.zIndex = -1, null != e.getAttribute("data-left") && ($$("txtbgColor").style.left = e.getAttribute("data-left"), $$("txtbgColor").style.width = e.getAttribute("data-width")), $(".songText").css("z-index", -1), $(".songText").removeClass("animated"); var t = document.getElementById("popup1"); document.getElementById("popup1").src = t.getAttribute("data-imgurl"); var a = e.getAttribute("data-seektimestart"), i = $$("playAudio_song1"); if (null == (i = i.getAttribute("data-audio-name")) && (i = "line_"), 1 != (a = Number(a))) for (var n = 1; n <= a; n++){ var o = $$(i + n); o.style.top = o.getAttribute("data-top") + "%", o.style.display = "none" } } var r = $$($("#jquery_jplayer_1 audio")[0].id); r.style.display = "none", r.pause(), r.currentTime || (r.currentTime = 0), r.src = "", r.style.zIndex = 2, $("#jplayer_total_time").html("00:00"), $(".playButton").css("z-index", 2), $(".label").removeClass("active"), $(".label_img").removeClass("active"), $(".labelSong").removeClass("active"), $(".label_1").removeClass("active"), $$("divOverlay").style.zIndex = -1; var l = $$("audioPlayer"); l.style.display = "none", l.style.zIndex = -1, closeAllPopups() } function showImage(e) { var t = $$(e); if ("popup clicked" != t.className) { for (var a = document.getElementsByClassName("popup"), i = 2, n = 0; n < a.length; n++){ var o = parseInt(a[n].style.zIndex); o > i && (i = o) } "" != t.getAttribute("data-top") && (t.style.top = t.getAttribute("data-top")), t.style.zIndex = i + 1, t.className = "popup clicked"; var r = $$("closeBtn").cloneNode(); r.id = "close_" + e, r.addEventListener("click", function () { closePopup(this) }, !1), r.style.display = "block"; var l = t.getAttribute("data-top"), s = t.getAttribute("data-top"); l = l.replace("px", ""), "close_popup3" == r.id ? l -= 6 : l -= 11, s.indexOf("%") > -1 ? (r.style.top = s, r.style.right = "" == t.getAttribute("data-right") || null == t.getAttribute("data-right") ? "14%" : t.getAttribute("data-right")) : (r.style.top = l + "px", r.style.right = "" == t.getAttribute("data-right") || null == t.getAttribute("data-right") ? "12px" : t.getAttribute("data-right")), r.style.opacity = 1, r.className = "popup closeBtn", r.style.zIndex = i + 2, $$("divOverlay").style.zIndex = i + 1, t.parentNode.insertBefore(r, t) } } function closeAllPopups() { for (var e = document.getElementsByClassName("closeBtn"), t = 0; t < e.length; t++)e[t].click() } function closePopup(e) { var t = $$(e.id.replace("close_", "")); e.remove(), t.className = "popup", t.style.zIndex = 2, t.position = "absolute", t.style.top = null, $$("divOverlay").style.zIndex = -1, 0 != $("#jquery_jplayer_1 audio").length && (clsAudio(), $("#jquery_jplayer_1").jPlayer("destroy")) } $(document).on("click", ".label,.label_img,.labelSong,.label_1", function () { try { var e = "Name: " + ("Media-Label-Seek_" + this.dataset.seektimestart + "_" + this.dataset.seektimeend) + "; URL: " + window.location.href; appInsights.trackEvent(e) } catch (e) { } var t = $(this).data("seektimestart"), a = $(this).data("repeattimestart"); a && a < audioPlayerElement.currentTime ? audioPlayerElement.currentTime = null != $(this).data("rhymes") ? parseInt(a) + .9 : a : audioPlayerElement.currentTime = null != $(this).data("rhymes") ? parseInt(t) + .9 : t }), $(document).on("click", ".LearnNew_Words,.LearnNew_Rap", function (e) { try { var t = e.currentTarget.id, a = window.location.href, i = "", n = e.currentTarget.className; n.indexOf("LearnNew_Words") >= 0 ? i = "LearnNew_Words" : n.indexOf("LearnNew_Rap") >= 0 && (i = "LearnNew_Rap"); var o = "Name: " + t + "; " + i + "; URL: " + a; appInsights.trackEvent(o) } catch (e) { } }), set_interval(), $(document).on("click", "#audio", function (e) { highlightText(), highlightTextTime() }), $(document).on("loadComplete", function (e, t) { t.handleZoom() });